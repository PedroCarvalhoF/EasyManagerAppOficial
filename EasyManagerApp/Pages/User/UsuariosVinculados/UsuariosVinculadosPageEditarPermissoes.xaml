<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="EasyManagerApp.Pages.User.UsuariosVinculados.UsuariosVinculadosPageEditarPermissoes"
             xmlns:view="clr-namespace:EasyManagerApp.DtosViewModel.Compostas"
             xmlns:view_roles="clr-namespace:EasyManagerApp.Views.UserRole"
             x:DataType="view:UsuarioVinculadoClienteEditarViewModel"
             Shell.NavBarIsVisible="False">

    <VerticalStackLayout Margin="10"
                         Spacing="5"
                         Padding="10">
        <!-- Informações do Usuário -->
        <Border Style="{StaticResource CardBorderStyle}">
            <VerticalStackLayout Spacing="5">
                <Label Text="{Binding UsuarioVinculado.NomeUsuarioVinculado}"
                       Style="{StaticResource TitleTextStyle}" />
                <Label Text="{Binding UsuarioVinculado.EmailUsuarioVinculado}"
                       Style="{StaticResource TitleTextStyle}" />
            </VerticalStackLayout>
        </Border>
        <Border Style="{StaticResource CardBorderStyle}">

            <Grid ColumnDefinitions="*,auto,auto"
                  ColumnSpacing="5">
                <Picker x:Name="pckPermissoes"
                        Grid.Column="0"
                        ItemsSource="{Binding Role.RolesPermissoes}"
                        ItemDisplayBinding="{Binding RoleName}" />

                <Button x:Name="btnRemoverRole"
                        Clicked="btnRemoverRole_Clicked"
                        Grid.Column="1"
                        BackgroundColor="Crimson"
                        Text="Remover" />

                <Button x:Name="btnAdiconarRole"
                        Clicked="btnAdiconarRole_Clicked"
                        Grid.Column="2"
                        Text="Adicionar"
                        BackgroundColor="SeaGreen" />

            </Grid>

        </Border>

        <CollectionView Margin="12"
                        ItemsSource="{Binding Role.RolesUsersAtivas}"
                        ItemsLayout="HorizontalList"
                        HorizontalScrollBarVisibility="Always">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <view_roles:ExibirPermissoesUsuariosCollectionView />
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <HorizontalStackLayout Spacing="5">
            <Button x:Name="btnVoltar"
                  Clicked="btnVoltar_Clicked"
                    Grid.Column="1"
                    Text="Voltar"
                    Style="{StaticResource PrimaryButtonStyle}" />
        </HorizontalStackLayout>

    </VerticalStackLayout>
</ContentPage>