<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="EasyManagerApp.Pages.User.UsuariosVinculados.UsuariosVinculadosPageEditarPermissoes"
             xmlns:view="clr-namespace:EasyManagerApp.DtosViewModel.Compostas"
             xmlns:view_roles="clr-namespace:EasyManagerApp.Views.UserRole"
             x:DataType="view:UsuarioVinculadoClienteEditarViewModel"
             xmlns:tookit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             NavigationPage.HasNavigationBar="False">

    <ContentPage.Behaviors>
        <tookit:StatusBarBehavior StatusBarColor="#123"
                                  StatusBarStyle="LightContent" />
    </ContentPage.Behaviors>

    <VerticalStackLayout Margin="10"
                         Spacing="5"
                         Padding="10">

        <Border Style="{StaticResource CardBorderStyle}">
            <Label Text="Permissões do Usuário"
                   HorizontalTextAlignment="Center"
                   Style="{StaticResource TitleTextStyle}" />
        </Border>
        <!-- Informações do Usuário -->
        <Border Style="{StaticResource CardBorderStyle}">
            <VerticalStackLayout Spacing="5">
                <Label Text="{Binding UsuarioVinculado.NomeUsuarioVinculado}"
                       Style="{StaticResource SubtitleTextStyle}" />
                <Label Text="{Binding UsuarioVinculado.EmailUsuarioVinculado}"
                       Style="{StaticResource SubtitleTextStyle}" />
            </VerticalStackLayout>
        </Border>

        <Grid ColumnDefinitions="*,auto,auto"
              Margin="0,10,0,0"
              ColumnSpacing="5">
            <Picker x:Name="pckPermissoes"
                    Grid.Column="0"
                    ItemsSource="{Binding Role.RolesPermissoes}"
                    ItemDisplayBinding="{Binding RoleName}" />

            <Button x:Name="btnRemoverRole"
                    Clicked="btnRemoverRole_Clicked"
                    Grid.Column="1"
                    Text="Remover"
                    Style="{StaticResource BtnCancelarRemover}" />

            <Button x:Name="btnAdiconarRole"
                    Clicked="btnAdiconarRole_Clicked"
                    Grid.Column="2"
                    Text="Adicionar"
                    Style="{StaticResource BtnConfirmarAdd}" />

        </Grid>

        <CollectionView Margin="0,10,0,10"
                        ItemsSource="{Binding Role.RolesUsersAtivas}"
                        ItemsLayout="HorizontalList"
                        HorizontalScrollBarVisibility="Always">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <view_roles:ExibirPermissoesUsuariosCollectionView />
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <HorizontalStackLayout Spacing="5">
            <Button x:Name="btnVoltar"
                    Clicked="btnVoltar_Clicked"
                    Grid.Column="1"
                    Text="Voltar"
                    Style="{StaticResource SecondaryButtonStyle}" />
        </HorizontalStackLayout>

    </VerticalStackLayout>
</ContentPage>